//
//  ViewController.m
//  BusLayout
//
//  Created by Susmita Horrow on 13/02/16.
//  Copyright Â© 2016 Ashutosh. All rights reserved.
//

#import "SeatLayoutController.h"
#import "PriceCell.h"
#import "Seat.h"
#define MaximumAllowedSelection 6

@interface SeatLayoutController()<SeatCollectionViewDatasource>

@property (nonatomic, strong) NSMutableArray * priceArray;
@property (nonatomic, strong) NSArray * seatsArray;
@property (nonatomic, strong) NSArray * upperSeatsArray;
@property (nonatomic, strong) NSMutableArray *indexPathsForUpperSelectedSeats;
@property (nonatomic, strong) NSMutableArray *indexPathsForLowerSelectedSeats;
@property (weak, nonatomic) IBOutlet UISegmentedControl *segmentControl;

@end

@implementation SeatLayoutController

- (void)viewDidLoad {
	[super viewDidLoad];
	self.lowerSeatCollectionView.datasource = self;
	self.upperSeatCollectionView.datasource = self;

	_priceArray = [NSMutableArray arrayWithObjects:@"All", @"200", @"400", @"600", @"800", nil];
	[self configureData];
}

- (void)viewDidLayoutSubviews {
	[super viewDidLayoutSubviews];
	[self.lowerSeatCollectionView reloadSeatCollectionViewWithHeader:YES];
	[self.upperSeatCollectionView reloadSeatCollectionViewWithHeader:NO];
}

- (void)configureData {
	NSString *str = @"{  \r\n   \"Wallet\":{  \r\n  \"ResponseCode\":0,\r\n      \"ResponseMessage\":\"Success\",\r\n      \"CurrentDateTime\":\"2016-02-15T12:57:55.9823535+05:30\",\r\n      \"DataCollection\":{  \r\n         \"data\":{  \r\n            \"onwardSeats\":[  \r\n               {  \r\n                  \"ServiceTaxPercentage\":\"0\",\r\n                  \"ActualSeatFare\":\"120.0\",\r\n                  \"SeatType\":\"Seater\",\r\n                  \"RowNo\":\"0\",\r\n                  \"Deck\":\"1\",\r\n                  \"ColumnNo\":\"0\",\r\n                  \"serviceCharge\":0,\r\n                  \"SeatFare\":\"120\",\r\n                  \"Height\":\"1\",\r\n                  \"Width\":\"1\",\r\n                  \"LSeat\":\"false\",\r\n                  \"BaseFare\":\"120.00\",\r\n                  \"ServiceTax\":\"0.00\",\r\n                  \"SeatName\":\"B\",\r\n                  \"seat_status\":\"availableSeat\",\r\n                  \"SeatStatus\":\"1\",\r\n                  \"row_type\":\"onwardflights\"\r\n               },\r\n               {  \r\n                  \"ServiceTaxPercentage\":\"0\",\r\n                  \"ActualSeatFare\":\"120.0\",\r\n                  \"SeatType\":\"Seater\",\r\n                  \"RowNo\":\"0\",\r\n                  \"Deck\":\"1\",\r\n                  \"ColumnNo\":\"1\",\r\n                  \"serviceCharge\":0,\r\n                  \"SeatFare\":\"120\",\r\n                  \"Height\":\"1\",\r\n                  \"Width\":\"1\",\r\n                  \"LSeat\":\"false\",\r\n                  \"BaseFare\":\"120.00\",\r\n                  \"ServiceTax\":\"0.00\",\r\n                  \"SeatName\":\"4\",\r\n                  \"seat_status\":\"availableSeat\",\r\n                  \"SeatStatus\":\"1\",\r\n                  \"row_type\":\"onwardflights\"\r\n               },\r\n               {  \r\n                  \"ServiceTaxPercentage\":\"0\",\r\n                  \"ActualSeatFare\":\"120.0\",\r\n                  \"SeatType\":\"Seater\",\r\n                  \"RowNo\":\"0\",\r\n                  \"Deck\":\"1\",\r\n                  \"ColumnNo\":\"2\",\r\n                  \"serviceCharge\":0,\r\n                  \"SeatFare\":\"120\",\r\n                  \"Height\":\"1\",\r\n                  \"Width\":\"1\",\r\n                  \"LSeat\":\"false\",\r\n                  \"BaseFare\":\"120.00\",\r\n                  \"ServiceTax\":\"0.00\",\r\n                  \"SeatName\":\"8\",\r\n                  \"seat_status\":\"availableSeat\",\r\n                  \"SeatStatus\":\"1\",\r\n                  \"row_type\":\"onwardflights\"\r\n               },\r\n               {  \r\n                  \"ServiceTaxPercentage\":\"0\",\r\n                  \"ActualSeatFare\":\"120.0\",\r\n                  \"SeatType\":\"Seater\",\r\n                  \"RowNo\":\"0\",\r\n                  \"Deck\":\"1\",\r\n                  \"ColumnNo\":\"3\",\r\n                  \"serviceCharge\":0,\r\n                  \"SeatFare\":\"120\",\r\n                  \"Height\":\"1\",\r\n                  \"Width\":\"1\",\r\n                  \"LSeat\":\"false\",\r\n                  \"BaseFare\":\"120.00\",\r\n                  \"ServiceTax\":\"0.00\",\r\n                  \"SeatName\":\"12\",\r\n                  \"seat_status\":\"availableSeat\",\r\n                  \"SeatStatus\":\"1\",\r\n                  \"row_type\":\"onwardflights\"\r\n               },\r\n               {  \r\n                  \"ServiceTaxPercentage\":\"0\",\r\n                  \"ActualSeatFare\":\"120.0\",\r\n                  \"SeatType\":\"Seater\",\r\n                  \"RowNo\":\"0\",\r\n                  \"Deck\":\"1\",\r\n                  \"ColumnNo\":\"4\",\r\n                  \"serviceCharge\":0,\r\n                  \"SeatFare\":\"120\",\r\n                  \"Height\":\"1\",\r\n                  \"Width\":\"1\",\r\n                  \"LSeat\":\"false\",\r\n                  \"BaseFare\":\"120.00\",\r\n                  \"ServiceTax\":\"0.00\",\r\n                  \"SeatName\":\"16\",\r\n                  \"seat_status\":\"availableSeat\",\r\n                  \"SeatStatus\":\"1\",\r\n                  \"row_type\":\"onwardflights\"\r\n               },\r\n               {  \r\n                  \"ServiceTaxPercentage\":\"0\",\r\n                  \"ActualSeatFare\":\"120.0\",\r\n                  \"SeatType\":\"Seater\",\r\n                  \"RowNo\":\"0\",\r\n                  \"Deck\":\"1\",\r\n                  \"ColumnNo\":\"5\",\r\n                  \"serviceCharge\":0,\r\n                  \"SeatFare\":\"120\",\r\n                  \"Height\":\"1\",\r\n                  \"Width\":\"1\",\r\n                  \"LSeat\":\"false\",\r\n                  \"BaseFare\":\"120.00\",\r\n                  \"ServiceTax\":\"0.00\",\r\n                  \"SeatName\":\"20\",\r\n                  \"seat_status\":\"availableSeat\",\r\n                  \"SeatStatus\":\"1\",\r\n                  \"row_type\":\"onwardflights\"\r\n               },\r\n               {  \r\n                  \"ServiceTaxPercentage\":\"0\",\r\n                  \"ActualSeatFare\":\"120.0\",\r\n                  \"SeatType\":\"Seater\",\r\n                  \"RowNo\":\"0\",\r\n                  \"Deck\":\"1\",\r\n                  \"ColumnNo\":\"6\",\r\n                  \"serviceCharge\":0,\r\n                  \"SeatFare\":\"120\",\r\n                  \"Height\":\"1\",\r\n                  \"Width\":\"1\",\r\n                  \"LSeat\":\"false\",\r\n                  \"BaseFare\":\"120.00\",\r\n                  \"ServiceTax\":\"0.00\",\r\n                  \"SeatName\":\"24\",\r\n                  \"seat_status\":\"availableSeat\",\r\n                  \"SeatStatus\":\"1\",\r\n                  \"row_type\":\"onwardflights\"\r\n               },\r\n               {  \r\n                  \"ServiceTaxPercentage\":\"0\",\r\n                  \"ActualSeatFare\":\"120.0\",\r\n                  \"SeatType\":\"Seater\",\r\n                  \"RowNo\":\"0\",\r\n                  \"Deck\":\"1\",\r\n                  \"ColumnNo\":\"7\",\r\n                  \"serviceCharge\":0,\r\n                  \"SeatFare\":\"120\",\r\n                  \"Height\":\"1\",\r\n                  \"Width\":\"1\",\r\n                  \"LSeat\":\"false\",\r\n                  \"BaseFare\":\"120.00\",\r\n                  \"ServiceTax\":\"0.00\",\r\n                  \"SeatName\":\"28\",\r\n                  \"seat_status\":\"availableSeat\",\r\n                  \"SeatStatus\":\"1\",\r\n                  \"row_type\":\"onwardflights\"\r\n               },\r\n               {  \r\n                  \"ServiceTaxPercentage\":\"0\",\r\n                  \"ActualSeatFare\":\"120.0\",\r\n                  \"SeatType\":\"Seater\",\r\n                  \"RowNo\":\"0\",\r\n                  \"Deck\":\"1\",\r\n                  \"ColumnNo\":\"8\",\r\n                  \"serviceCharge\":0,\r\n                  \"SeatFare\":\"120\",\r\n                  \"Height\":\"1\",\r\n                  \"Width\":\"1\",\r\n                  \"LSeat\":\"false\",\r\n                  \"BaseFare\":\"120.00\",\r\n                  \"ServiceTax\":\"0.00\",\r\n                  \"SeatName\":\"32\",\r\n                  \"seat_status\":\"availableSeat\",\r\n                  \"SeatStatus\":\"1\",\r\n                  \"row_type\":\"onwardflights\"\r\n               },\r\n               {  \r\n                  \"ServiceTaxPercentage\":\"0\",\r\n                  \"ActualSeatFare\":\"120.0\",\r\n                  \"SeatType\":\"Seater\",\r\n                  \"RowNo\":\"0\",\r\n                  \"Deck\":\"1\",\r\n                  \"ColumnNo\":\"9\",\r\n                  \"serviceCharge\":0,\r\n                  \"SeatFare\":\"120\",\r\n                  \"Height\":\"1\",\r\n                  \"Width\":\"1\",\r\n                  \"LSeat\":\"false\",\r\n                  \"BaseFare\":\"120.00\",\r\n                  \"ServiceTax\":\"0.00\",\r\n                  \"SeatName\":\"36\",\r\n                  \"seat_status\":\"availableSeat\",\r\n                  \"SeatStatus\":\"1\",\r\n                  \"row_type\":\"onwardflights\"\r\n               },\r\n               {  \r\n                  \"ServiceTaxPercentage\":\"0\",\r\n                  \"ActualSeatFare\":\"120.0\",\r\n                  \"SeatType\":\"Seater\",\r\n                  \"RowNo\":\"0\",\r\n                  \"Deck\":\"1\",\r\n                  \"ColumnNo\":\"10\",\r\n                  \"serviceCharge\":0,\r\n                  \"SeatFare\":\"120\",\r\n                  \"Height\":\"1\",\r\n                  \"Width\":\"1\",\r\n                  \"LSeat\":\"false\",\r\n                  \"BaseFare\":\"120.00\",\r\n                  \"ServiceTax\":\"0.00\",\r\n                  \"SeatName\":\"41\",\r\n                  \"seat_status\":\"availableSeat\",\r\n                  \"SeatStatus\":\"1\",\r\n                  \"row_type\":\"onwardflights\"\r\n               },\r\n               {  \r\n                  \"ServiceTaxPercentage\":\"0\",\r\n                  \"ActualSeatFare\":\"120.0\",\r\n                  \"SeatType\":\"Seater\",\r\n                  \"RowNo\":\"1\",\r\n                  \"Deck\":\"1\",\r\n                  \"ColumnNo\":\"0\",\r\n                  \"serviceCharge\":0,\r\n                  \"SeatFare\":\"120\",\r\n                  \"Height\":\"1\",\r\n                  \"Width\":\"1\",\r\n                  \"LSeat\":\"false\",\r\n                  \"BaseFare\":\"120.00\",\r\n                  \"ServiceTax\":\"0.00\",\r\n                  \"SeatName\":\"A\",\r\n                  \"seat_status\":\"availableSeat\",\r\n                  \"SeatStatus\":\"1\",\r\n                  \"row_type\":\"onwardflights\"\r\n               },\r\n               {  \r\n                  \"ServiceTaxPercentage\":\"0\",\r\n                  \"ActualSeatFare\":\"120.0\",\r\n                  \"SeatType\":\"Seater\",\r\n                  \"RowNo\":\"1\",\r\n                  \"Deck\":\"1\",\r\n                  \"ColumnNo\":\"1\",\r\n                  \"serviceCharge\":0,\r\n                  \"SeatFare\":\"120\",\r\n                  \"Height\":\"1\",\r\n                  \"Width\":\"1\",\r\n                  \"LSeat\":\"false\",\r\n                  \"BaseFare\":\"120.00\",\r\n                  \"ServiceTax\":\"0.00\",\r\n                  \"SeatName\":\"3\",\r\n                  \"seat_status\":\"availableSeat\",\r\n                  \"SeatStatus\":\"1\",\r\n                  \"row_type\":\"onwardflights\"\r\n               },\r\n               {  \r\n                  \"ServiceTaxPercentage\":\"0\",\r\n                  \"ActualSeatFare\":\"120.0\",\r\n                  \"SeatType\":\"Seater\",\r\n                  \"RowNo\":\"1\",\r\n                  \"Deck\":\"1\",\r\n                  \"ColumnNo\":\"2\",\r\n                  \"serviceCharge\":0,\r\n                  \"SeatFare\":\"120\",\r\n                  \"Height\":\"1\",\r\n                  \"Width\":\"1\",\r\n                  \"LSeat\":\"false\",\r\n                  \"BaseFare\":\"120.00\",\r\n                  \"ServiceTax\":\"0.00\",\r\n                  \"SeatName\":\"7\",\r\n                  \"seat_status\":\"availableSeat\",\r\n                  \"SeatStatus\":\"1\",\r\n                  \"row_type\":\"onwardflights\"\r\n               },\r\n               {  \r\n                  \"ServiceTaxPercentage\":\"0\",\r\n                  \"ActualSeatFare\":\"120.0\",\r\n                  \"SeatType\":\"Seater\",\r\n                  \"RowNo\":\"1\",\r\n                  \"Deck\":\"1\",\r\n                  \"ColumnNo\":\"3\",\r\n                  \"serviceCharge\":0,\r\n                  \"SeatFare\":\"120\",\r\n                  \"Height\":\"1\",\r\n                  \"Width\":\"1\",\r\n                  \"LSeat\":\"false\",\r\n                  \"BaseFare\":\"120.00\",\r\n                  \"ServiceTax\":\"0.00\",\r\n                  \"SeatName\":\"11\",\r\n                  \"seat_status\":\"availableSeat\",\r\n                  \"SeatStatus\":\"1\",\r\n                  \"row_type\":\"onwardflights\"\r\n               },\r\n               {  \r\n                  \"ServiceTaxPercentage\":\"0\",\r\n                  \"ActualSeatFare\":\"120.0\",\r\n                  \"SeatType\":\"Seater\",\r\n                  \"RowNo\":\"1\",\r\n                  \"Deck\":\"1\",\r\n                  \"ColumnNo\":\"4\",\r\n                  \"serviceCharge\":0,\r\n                  \"SeatFare\":\"120\",\r\n                  \"Height\":\"1\",\r\n                  \"Width\":\"1\",\r\n                  \"LSeat\":\"false\",\r\n                  \"BaseFare\":\"120.00\",\r\n                  \"ServiceTax\":\"0.00\",\r\n                  \"SeatName\":\"15\",\r\n                  \"seat_status\":\"availableSeat\",\r\n                  \"SeatStatus\":\"1\",\r\n                  \"row_type\":\"onwardflights\"\r\n               },\r\n               {  \r\n                  \"ServiceTaxPercentage\":\"0\",\r\n                  \"ActualSeatFare\":\"120.0\",\r\n                  \"SeatType\":\"Seater\",\r\n                  \"RowNo\":\"1\",\r\n                  \"Deck\":\"1\",\r\n                  \"ColumnNo\":\"5\",\r\n                  \"serviceCharge\":0,\r\n                  \"SeatFare\":\"120\",\r\n                  \"Height\":\"1\",\r\n                  \"Width\":\"1\",\r\n                  \"LSeat\":\"false\",\r\n                  \"BaseFare\":\"120.00\",\r\n                  \"ServiceTax\":\"0.00\",\r\n                  \"SeatName\":\"19\",\r\n                  \"seat_status\":\"availableSeat\",\r\n                  \"SeatStatus\":\"1\",\r\n                  \"row_type\":\"onwardflights\"\r\n               },\r\n               {  \r\n                  \"ServiceTaxPercentage\":\"0\",\r\n                  \"ActualSeatFare\":\"120.0\",\r\n                  \"SeatType\":\"Seater\",\r\n                  \"RowNo\":\"1\",\r\n                  \"Deck\":\"1\",\r\n                  \"ColumnNo\":\"6\",\r\n                  \"serviceCharge\":0,\r\n                  \"SeatFare\":\"120\",\r\n                  \"Height\":\"1\",\r\n                  \"Width\":\"1\",\r\n                  \"LSeat\":\"false\",\r\n                  \"BaseFare\":\"120.00\",\r\n                  \"ServiceTax\":\"0.00\",\r\n                  \"SeatName\":\"23\",\r\n                  \"seat_status\":\"availableSeat\",\r\n                  \"SeatStatus\":\"1\",\r\n                  \"row_type\":\"onwardflights\"\r\n               },\r\n               {  \r\n                  \"ServiceTaxPercentage\":\"0\",\r\n                  \"ActualSeatFare\":\"120.0\",\r\n                  \"SeatType\":\"Seater\",\r\n                  \"RowNo\":\"1\",\r\n                  \"Deck\":\"1\",\r\n                  \"ColumnNo\":\"7\",\r\n                  \"serviceCharge\":0,\r\n                  \"SeatFare\":\"120\",\r\n                  \"Height\":\"1\",\r\n                  \"Width\":\"1\",\r\n                  \"LSeat\":\"false\",\r\n                  \"BaseFare\":\"120.00\",\r\n                  \"ServiceTax\":\"0.00\",\r\n                  \"SeatName\":\"27\",\r\n                  \"seat_status\":\"availableSeat\",\r\n                  \"SeatStatus\":\"1\",\r\n                  \"row_type\":\"onwardflights\"\r\n               },\r\n               {  \r\n                  \"ServiceTaxPercentage\":\"0\",\r\n                  \"ActualSeatFare\":\"120.0\",\r\n                  \"SeatType\":\"Seater\",\r\n                  \"RowNo\":\"1\",\r\n                  \"Deck\":\"1\",\r\n                  \"ColumnNo\":\"8\",\r\n                  \"serviceCharge\":0,\r\n                  \"SeatFare\":\"120\",\r\n                  \"Height\":\"1\",\r\n                  \"Width\":\"1\",\r\n                  \"LSeat\":\"false\",\r\n                  \"BaseFare\":\"120.00\",\r\n                  \"ServiceTax\":\"0.00\",\r\n                  \"SeatName\":\"31\",\r\n                  \"seat_status\":\"availableSeat\",\r\n                  \"SeatStatus\":\"1\",\r\n                  \"row_type\":\"onwardflights\"\r\n               },\r\n               {  \r\n                  \"ServiceTaxPercentage\":\"0\",\r\n                  \"ActualSeatFare\":\"120.0\",\r\n                  \"SeatType\":\"Seater\",\r\n                  \"RowNo\":\"1\",\r\n                  \"Deck\":\"1\",\r\n                  \"ColumnNo\":\"9\",\r\n                  \"serviceCharge\":0,\r\n                  \"SeatFare\":\"120\",\r\n                  \"Height\":\"1\",\r\n                  \"Width\":\"1\",\r\n                  \"LSeat\":\"false\",\r\n                  \"BaseFare\":\"120.00\",\r\n                  \"ServiceTax\":\"0.00\",\r\n                  \"SeatName\":\"35\",\r\n                  \"seat_status\":\"availableSeat\",\r\n                  \"SeatStatus\":\"1\",\r\n                  \"row_type\":\"onwardflights\"\r\n               },\r\n               {  \r\n                  \"ServiceTaxPercentage\":\"0\",\r\n                  \"ActualSeatFare\":\"120.0\",\r\n                  \"SeatType\":\"Seater\",\r\n                  \"RowNo\":\"1\",\r\n                  \"Deck\":\"1\",\r\n                  \"ColumnNo\":\"10\",\r\n                  \"serviceCharge\":0,\r\n                  \"SeatFare\":\"120\",\r\n                  \"Height\":\"1\",\r\n                  \"Width\":\"1\",\r\n                  \"LSeat\":\"false\",\r\n                  \"BaseFare\":\"120.00\",\r\n                  \"ServiceTax\":\"0.00\",\r\n                  \"SeatName\":\"40\",\r\n                  \"seat_status\":\"availableSeat\",\r\n                  \"SeatStatus\":\"1\",\r\n                  \"row_type\":\"onwardflights\"\r\n               },\r\n               {  \r\n                  \"ServiceTaxPercentage\":\"0\",\r\n                  \"ActualSeatFare\":\"120.0\",\r\n                  \"SeatType\":\"Seater\",\r\n                  \"RowNo\":\"2\",\r\n                  \"Deck\":\"1\",\r\n                  \"ColumnNo\":\"10\",\r\n                  \"serviceCharge\":0,\r\n                  \"SeatFare\":\"120\",\r\n                  \"Height\":\"1\",\r\n                  \"Width\":\"1\",\r\n                  \"LSeat\":\"false\",\r\n                  \"BaseFare\":\"120.00\",\r\n                  \"ServiceTax\":\"0.00\",\r\n                  \"SeatName\":\"39\",\r\n                  \"seat_status\":\"availableSeat\",\r\n                  \"SeatStatus\":\"1\",\r\n                  \"row_type\":\"onwardflights\"\r\n               },\r\n               {  \r\n                  \"ServiceTaxPercentage\":\"0\",\r\n                  \"ActualSeatFare\":\"120.0\",\r\n                  \"SeatType\":\"Seater\",\r\n                  \"RowNo\":\"3\",\r\n                  \"Deck\":\"1\",\r\n                  \"ColumnNo\":\"0\",\r\n                  \"serviceCharge\":0,\r\n                  \"SeatFare\":\"120\",\r\n                  \"Height\":\"1\",\r\n                  \"Width\":\"1\",\r\n                  \"LSeat\":\"false\",\r\n                  \"BaseFare\":\"120.00\",\r\n                  \"ServiceTax\":\"0.00\",\r\n                  \"SeatName\":\"D\",\r\n                  \"seat_status\":\"availableSeat\",\r\n                  \"SeatStatus\":\"1\",\r\n                  \"row_type\":\"onwardflights\"\r\n               },\r\n               {  \r\n                  \"ServiceTaxPercentage\":\"0\",\r\n                  \"ActualSeatFare\":\"120.0\",\r\n                  \"SeatType\":\"Seater\",\r\n                  \"RowNo\":\"3\",\r\n                  \"Deck\":\"1\",\r\n                  \"ColumnNo\":\"1\",\r\n                  \"serviceCharge\":0,\r\n                  \"SeatFare\":\"120\",\r\n                  \"Height\":\"1\",\r\n                  \"Width\":\"1\",\r\n                  \"LSeat\":\"false\",\r\n                  \"BaseFare\":\"120.00\",\r\n                  \"ServiceTax\":\"0.00\",\r\n                  \"SeatName\":\"2\",\r\n                  \"seat_status\":\"availableSeat\",\r\n                  \"SeatStatus\":\"1\",\r\n                  \"row_type\":\"onwardflights\"\r\n               },\r\n               {  \r\n                  \"ServiceTaxPercentage\":\"0\",\r\n                  \"ActualSeatFare\":\"120.0\",\r\n                  \"SeatType\":\"Seater\",\r\n                  \"RowNo\":\"3\",\r\n                  \"Deck\":\"1\",\r\n                  \"ColumnNo\":\"2\",\r\n                  \"serviceCharge\":0,\r\n                  \"SeatFare\":\"120\",\r\n                  \"Height\":\"1\",\r\n                  \"Width\":\"1\",\r\n                  \"LSeat\":\"false\",\r\n                  \"BaseFare\":\"120.00\",\r\n                  \"ServiceTax\":\"0.00\",\r\n                  \"SeatName\":\"6\",\r\n                  \"seat_status\":\"availableSeat\",\r\n                  \"SeatStatus\":\"1\",\r\n                  \"row_type\":\"onwardflights\"\r\n               },\r\n               {  \r\n                  \"ServiceTaxPercentage\":\"0\",\r\n                  \"ActualSeatFare\":\"120.0\",\r\n                  \"SeatType\":\"Seater\",\r\n                  \"RowNo\":\"3\",\r\n                  \"Deck\":\"1\",\r\n                  \"ColumnNo\":\"3\",\r\n                  \"serviceCharge\":0,\r\n                  \"SeatFare\":\"120\",\r\n                  \"Height\":\"1\",\r\n                  \"Width\":\"1\",\r\n                  \"LSeat\":\"false\",\r\n                  \"BaseFare\":\"120.00\",\r\n                  \"ServiceTax\":\"0.00\",\r\n                  \"SeatName\":\"10\",\r\n                  \"seat_status\":\"availableSeat\",\r\n                  \"SeatStatus\":\"1\",\r\n                  \"row_type\":\"onwardflights\"\r\n               },\r\n               {  \r\n                  \"ServiceTaxPercentage\":\"0\",\r\n                  \"ActualSeatFare\":\"120.0\",\r\n                  \"SeatType\":\"Seater\",\r\n                  \"RowNo\":\"3\",\r\n                  \"Deck\":\"1\",\r\n                  \"ColumnNo\":\"4\",\r\n                  \"serviceCharge\":0,\r\n                  \"SeatFare\":\"120\",\r\n                  \"Height\":\"1\",\r\n                  \"Width\":\"1\",\r\n                  \"LSeat\":\"false\",\r\n                  \"BaseFare\":\"120.00\",\r\n                  \"ServiceTax\":\"0.00\",\r\n                  \"SeatName\":\"14\",\r\n                  \"seat_status\":\"availableSeat\",\r\n                  \"SeatStatus\":\"1\",\r\n                  \"row_type\":\"onwardflights\"\r\n               },\r\n               {  \r\n                  \"ServiceTaxPercentage\":\"0\",\r\n                  \"ActualSeatFare\":\"120.0\",\r\n                  \"SeatType\":\"Seater\",\r\n                  \"RowNo\":\"3\",\r\n                  \"Deck\":\"1\",\r\n                  \"ColumnNo\":\"5\",\r\n                  \"serviceCharge\":0,\r\n                  \"SeatFare\":\"120\",\r\n                  \"Height\":\"1\",\r\n                  \"Width\":\"1\",\r\n                  \"LSeat\":\"false\",\r\n                  \"BaseFare\":\"120.00\",\r\n                  \"ServiceTax\":\"0.00\",\r\n                  \"SeatName\":\"18\",\r\n                  \"seat_status\":\"availableSeat\",\r\n                  \"SeatStatus\":\"1\",\r\n                  \"row_type\":\"onwardflights\"\r\n               },\r\n               {  \r\n                  \"ServiceTaxPercentage\":\"0\",\r\n                  \"ActualSeatFare\":\"120.0\",\r\n                  \"SeatType\":\"Seater\",\r\n                  \"RowNo\":\"3\",\r\n                  \"Deck\":\"1\",\r\n                  \"ColumnNo\":\"6\",\r\n                  \"serviceCharge\":0,\r\n                  \"SeatFare\":\"120\",\r\n                  \"Height\":\"1\",\r\n                  \"Width\":\"1\",\r\n                  \"LSeat\":\"false\",\r\n                  \"BaseFare\":\"120.00\",\r\n                  \"ServiceTax\":\"0.00\",\r\n                  \"SeatName\":\"22\",\r\n                  \"seat_status\":\"availableSeat\",\r\n                  \"SeatStatus\":\"1\",\r\n                  \"row_type\":\"onwardflights\"\r\n               },\r\n               {  \r\n                  \"ServiceTaxPercentage\":\"0\",\r\n                  \"ActualSeatFare\":\"120.0\",\r\n                  \"SeatType\":\"Seater\",\r\n                  \"RowNo\":\"3\",\r\n                  \"Deck\":\"1\",\r\n                  \"ColumnNo\":\"7\",\r\n                  \"serviceCharge\":0,\r\n                  \"SeatFare\":\"120\",\r\n                  \"Height\":\"1\",\r\n                  \"Width\":\"1\",\r\n                  \"LSeat\":\"false\",\r\n                  \"BaseFare\":\"120.00\",\r\n                  \"ServiceTax\":\"0.00\",\r\n                  \"SeatName\":\"26\",\r\n                  \"seat_status\":\"availableSeat\",\r\n                  \"SeatStatus\":\"1\",\r\n                  \"row_type\":\"onwardflights\"\r\n               },\r\n               {  \r\n                  \"ServiceTaxPercentage\":\"0\",\r\n                  \"ActualSeatFare\":\"120.0\",\r\n                  \"SeatType\":\"Seater\",\r\n                  \"RowNo\":\"3\",\r\n                  \"Deck\":\"1\",\r\n                  \"ColumnNo\":\"8\",\r\n                  \"serviceCharge\":0,\r\n                  \"SeatFare\":\"120\",\r\n                  \"Height\":\"1\",\r\n                  \"Width\":\"1\",\r\n                  \"LSeat\":\"false\",\r\n                  \"BaseFare\":\"120.00\",\r\n                  \"ServiceTax\":\"0.00\",\r\n                  \"SeatName\":\"30\",\r\n                  \"seat_status\":\"availableSeat\",\r\n                  \"SeatStatus\":\"1\",\r\n                  \"row_type\":\"onwardflights\"\r\n               },\r\n               {  \r\n                  \"ServiceTaxPercentage\":\"0\",\r\n                  \"ActualSeatFare\":\"120.0\",\r\n                  \"SeatType\":\"Seater\",\r\n                  \"RowNo\":\"3\",\r\n                  \"Deck\":\"1\",\r\n                  \"ColumnNo\":\"9\",\r\n                  \"serviceCharge\":0,\r\n                  \"SeatFare\":\"120\",\r\n                  \"Height\":\"1\",\r\n                  \"Width\":\"1\",\r\n                  \"LSeat\":\"false\",\r\n                  \"BaseFare\":\"120.00\",\r\n                  \"ServiceTax\":\"0.00\",\r\n                  \"SeatName\":\"34\",\r\n                  \"seat_status\":\"availableSeat\",\r\n                  \"SeatStatus\":\"1\",\r\n                  \"row_type\":\"onwardflights\"\r\n               },\r\n               {  \r\n                  \"ServiceTaxPercentage\":\"0\",\r\n                  \"ActualSeatFare\":\"120.0\",\r\n                  \"SeatType\":\"Seater\",\r\n                  \"RowNo\":\"3\",\r\n                  \"Deck\":\"1\",\r\n                  \"ColumnNo\":\"10\",\r\n                  \"serviceCharge\":0,\r\n                  \"SeatFare\":\"120\",\r\n                  \"Height\":\"1\",\r\n                  \"Width\":\"1\",\r\n                  \"LSeat\":\"false\",\r\n                  \"BaseFare\":\"120.00\",\r\n                  \"ServiceTax\":\"0.00\",\r\n                  \"SeatName\":\"38\",\r\n                  \"seat_status\":\"availableSeat\",\r\n                  \"SeatStatus\":\"1\",\r\n                  \"row_type\":\"onwardflights\"\r\n               },\r\n               {  \r\n                  \"ServiceTaxPercentage\":\"0\",\r\n                  \"ActualSeatFare\":\"120.0\",\r\n                  \"SeatType\":\"Seater\",\r\n                  \"RowNo\":\"4\",\r\n                  \"Deck\":\"1\",\r\n                  \"ColumnNo\":\"0\",\r\n                  \"serviceCharge\":0,\r\n                  \"SeatFare\":\"120\",\r\n                  \"Height\":\"1\",\r\n                  \"Width\":\"1\",\r\n                  \"LSeat\":\"false\",\r\n                  \"BaseFare\":\"120.00\",\r\n                  \"ServiceTax\":\"0.00\",\r\n                  \"SeatName\":\"C\",\r\n                  \"seat_status\":\"availableSeat\",\r\n                  \"SeatStatus\":\"1\",\r\n                  \"row_type\":\"onwardflights\"\r\n               },\r\n               {  \r\n                  \"ServiceTaxPercentage\":\"0\",\r\n                  \"ActualSeatFare\":\"120.0\",\r\n                  \"SeatType\":\"Seater\",\r\n                  \"RowNo\":\"4\",\r\n                  \"Deck\":\"1\",\r\n                  \"ColumnNo\":\"1\",\r\n                  \"serviceCharge\":0,\r\n                  \"SeatFare\":\"120\",\r\n                  \"Height\":\"1\",\r\n                  \"Width\":\"1\",\r\n                  \"LSeat\":\"false\",\r\n                  \"BaseFare\":\"120.00\",\r\n                  \"ServiceTax\":\"0.00\",\r\n                  \"SeatName\":\"1\",\r\n                  \"seat_status\":\"availableSeat\",\r\n                  \"SeatStatus\":\"1\",\r\n                  \"row_type\":\"onwardflights\"\r\n               },\r\n               {  \r\n                  \"ServiceTaxPercentage\":\"0\",\r\n                  \"ActualSeatFare\":\"120.0\",\r\n                  \"SeatType\":\"Seater\",\r\n                  \"RowNo\":\"4\",\r\n                  \"Deck\":\"1\",\r\n                  \"ColumnNo\":\"2\",\r\n                  \"serviceCharge\":0,\r\n                  \"SeatFare\":\"120\",\r\n                  \"Height\":\"1\",\r\n                  \"Width\":\"1\",\r\n                  \"LSeat\":\"false\",\r\n                  \"BaseFare\":\"120.00\",\r\n                  \"ServiceTax\":\"0.00\",\r\n                  \"SeatName\":\"5\",\r\n                  \"seat_status\":\"availableSeat\",\r\n                  \"SeatStatus\":\"1\",\r\n                  \"row_type\":\"onwardflights\"\r\n               },\r\n               {  \r\n                  \"ServiceTaxPercentage\":\"0\",\r\n                  \"ActualSeatFare\":\"120.0\",\r\n                  \"SeatType\":\"Seater\",\r\n                  \"RowNo\":\"4\",\r\n                  \"Deck\":\"1\",\r\n                  \"ColumnNo\":\"3\",\r\n                  \"serviceCharge\":0,\r\n                  \"SeatFare\":\"120\",\r\n                  \"Height\":\"1\",\r\n                  \"Width\":\"1\",\r\n                  \"LSeat\":\"false\",\r\n                  \"BaseFare\":\"120.00\",\r\n                  \"ServiceTax\":\"0.00\",\r\n                  \"SeatName\":\"9\",\r\n                  \"seat_status\":\"availableSeat\",\r\n                  \"SeatStatus\":\"1\",\r\n                  \"row_type\":\"onwardflights\"\r\n               },\r\n               {  \r\n                  \"ServiceTaxPercentage\":\"0\",\r\n                  \"ActualSeatFare\":\"120.0\",\r\n                  \"SeatType\":\"Seater\",\r\n                  \"RowNo\":\"4\",\r\n                  \"Deck\":\"1\",\r\n                  \"ColumnNo\":\"4\",\r\n                  \"serviceCharge\":0,\r\n                  \"SeatFare\":\"120\",\r\n                  \"Height\":\"1\",\r\n                  \"Width\":\"1\",\r\n                  \"LSeat\":\"false\",\r\n                  \"BaseFare\":\"120.00\",\r\n                  \"ServiceTax\":\"0.00\",\r\n                  \"SeatName\":\"13\",\r\n                  \"seat_status\":\"availableSeat\",\r\n                  \"SeatStatus\":\"1\",\r\n                  \"row_type\":\"onwardflights\"\r\n               },\r\n               {  \r\n                  \"ServiceTaxPercentage\":\"0\",\r\n                  \"ActualSeatFare\":\"120.0\",\r\n                  \"SeatType\":\"Seater\",\r\n                  \"RowNo\":\"4\",\r\n                  \"Deck\":\"1\",\r\n                  \"ColumnNo\":\"5\",\r\n                  \"serviceCharge\":0,\r\n                  \"SeatFare\":\"120\",\r\n                  \"Height\":\"1\",\r\n                  \"Width\":\"1\",\r\n                  \"LSeat\":\"false\",\r\n                  \"BaseFare\":\"120.00\",\r\n                  \"ServiceTax\":\"0.00\",\r\n                  \"SeatName\":\"17\",\r\n                  \"seat_status\":\"availableSeat\",\r\n                  \"SeatStatus\":\"1\",\r\n                  \"row_type\":\"onwardflights\"\r\n               },\r\n               {  \r\n                  \"ServiceTaxPercentage\":\"0\",\r\n                  \"ActualSeatFare\":\"120.0\",\r\n                  \"SeatType\":\"Seater\",\r\n                  \"RowNo\":\"4\",\r\n                  \"Deck\":\"1\",\r\n                  \"ColumnNo\":\"6\",\r\n                  \"serviceCharge\":0,\r\n                  \"SeatFare\":\"120\",\r\n                  \"Height\":\"1\",\r\n                  \"Width\":\"1\",\r\n                  \"LSeat\":\"false\",\r\n                  \"BaseFare\":\"120.00\",\r\n                  \"ServiceTax\":\"0.00\",\r\n                  \"SeatName\":\"21\",\r\n                  \"seat_status\":\"availableSeat\",\r\n                  \"SeatStatus\":\"1\",\r\n                  \"row_type\":\"onwardflights\"\r\n               },\r\n               {  \r\n                  \"ServiceTaxPercentage\":\"0\",\r\n                  \"ActualSeatFare\":\"120.0\",\r\n                  \"SeatType\":\"Seater\",\r\n                  \"RowNo\":\"4\",\r\n                  \"Deck\":\"1\",\r\n                  \"ColumnNo\":\"7\",\r\n                  \"serviceCharge\":0,\r\n                  \"SeatFare\":\"120\",\r\n                  \"Height\":\"1\",\r\n                  \"Width\":\"1\",\r\n                  \"LSeat\":\"false\",\r\n                  \"BaseFare\":\"120.00\",\r\n                  \"ServiceTax\":\"0.00\",\r\n                  \"SeatName\":\"25\",\r\n                  \"seat_status\":\"availableSeat\",\r\n                  \"SeatStatus\":\"1\",\r\n                  \"row_type\":\"onwardflights\"\r\n               },\r\n               {  \r\n                  \"ServiceTaxPercentage\":\"0\",\r\n                  \"ActualSeatFare\":\"120.0\",\r\n                  \"SeatType\":\"Seater\",\r\n                  \"RowNo\":\"4\",\r\n                  \"Deck\":\"1\",\r\n                  \"ColumnNo\":\"8\",\r\n                  \"serviceCharge\":0,\r\n                  \"SeatFare\":\"120\",\r\n                  \"Height\":\"1\",\r\n                  \"Width\":\"1\",\r\n                  \"LSeat\":\"false\",\r\n                  \"BaseFare\":\"120.00\",\r\n                  \"ServiceTax\":\"0.00\",\r\n                  \"SeatName\":\"29\",\r\n                  \"seat_status\":\"availableSeat\",\r\n                  \"SeatStatus\":\"1\",\r\n                  \"row_type\":\"onwardflights\"\r\n               },\r\n               {  \r\n                  \"ServiceTaxPercentage\":\"0\",\r\n                  \"ActualSeatFare\":\"120.0\",\r\n                  \"SeatType\":\"Seater\",\r\n                  \"RowNo\":\"4\",\r\n                  \"Deck\":\"1\",\r\n                  \"ColumnNo\":\"9\",\r\n                  \"serviceCharge\":0,\r\n                  \"SeatFare\":\"120\",\r\n                  \"Height\":\"1\",\r\n                  \"Width\":\"1\",\r\n                  \"LSeat\":\"false\",\r\n                  \"BaseFare\":\"120.00\",\r\n                  \"ServiceTax\":\"0.00\",\r\n                  \"SeatName\":\"33\",\r\n                  \"seat_status\":\"availableSeat\",\r\n                  \"SeatStatus\":\"1\",\r\n                  \"row_type\":\"onwardflights\"\r\n               },\r\n               {  \r\n                  \"ServiceTaxPercentage\":\"0\",\r\n                  \"ActualSeatFare\":\"120.0\",\r\n                  \"SeatType\":\"Seater\",\r\n                  \"RowNo\":\"4\",\r\n                  \"Deck\":\"1\",\r\n                  \"ColumnNo\":\"10\",\r\n                  \"serviceCharge\":0,\r\n                  \"SeatFare\":\"120\",\r\n                  \"Height\":\"1\",\r\n                  \"Width\":\"1\",\r\n                  \"LSeat\":\"false\",\r\n                  \"BaseFare\":\"120.00\",\r\n                  \"ServiceTax\":\"0.00\",\r\n                  \"SeatName\":\"37\",\r\n                  \"seat_status\":\"availableSeat\",\r\n                  \"SeatStatus\":\"1\",\r\n                  \"row_type\":\"onwardflights\"\r\n               }\r\n            ],\r\n            \"onwardBPs\":{  \r\n               \"status\":\"V\",\r\n               \"timestamp\":\"2016-02-15T12:24:05.734031\",\r\n               \"row_type\":\"onwardflights\",\r\n               \"datafrom\":\"redbusnew\",\r\n               \"GetBoardingPointsResult\":{  \r\n                  \"list\":[  \r\n                     {  \r\n                        \"BPLocation\":\"Gulabnagar\",\r\n                        \"BPContactNumber\":\"\",\r\n                        \"BPTime\":\"2016-03-10T08:55:00+05:30\",\r\n                        \"BPName\":\"1121802-Gulabnagar\",\r\n                        \"BPAddress\":\"\"\r\n                     },\r\n                     {  \r\n                        \"BPLocation\":\"Jamnagar Office\",\r\n                        \"BPContactNumber\":\"\",\r\n                        \"BPTime\":\"2016-03-10T20:45:00+05:30\",\r\n                        \"BPName\":\"1121834-Jamnagar Office\",\r\n                        \"BPAddress\":\"\"\r\n                     },\r\n                     {  \r\n                        \"BPLocation\":\"Victoria Bridge\",\r\n                        \"BPContactNumber\":\"\",\r\n                        \"BPTime\":\"2016-03-10T20:50:00+05:30\",\r\n                        \"BPName\":\"1121866-Victoria Bridge\",\r\n                        \"BPAddress\":\"\"\r\n                     }\r\n                  ]\r\n               },\r\n               \"NoOfBPs\":3,\r\n               \"datasource\":\"R\",\r\n               \"rowid\":\"BUS@GETBOARDINGPOINTS@ebdbf932-d3b5-11e5-8ca6-ea5d43f98a9f\",\r\n               \"CNTR_error\":\"None\"\r\n            },\r\n            \"returnflightsMaxC\":\"0\",\r\n            \"returnBPs\":{  \r\n\r\n            },\r\n            \"returnSeats\":[  \r\n\r\n            ],\r\n            \"onwardflightsMaxC\":\"5\",\r\n            \"returnflightsMaxR\":\"0\",\r\n            \"onwardflightsMaxR\":\"11\"\r\n         },\r\n         \"ErrorMessage\":null\r\n      }\r\n   }\r\n}";
	NSDictionary *dict = [self json_StringToDictionary:str];

	NSDictionary *wallet = [dict objectForKey:@"Wallet"];
	NSDictionary *dataCollection = [wallet objectForKey:@"DataCollection"];
	NSDictionary *data = [dataCollection objectForKey:@"data"];
	NSArray *onwardSeats = [data objectForKey:@"onwardSeats"];
	NSLog(@"onwardSeats = %@", onwardSeats);
	self.seatsArray = [Seat seatsFromArray:onwardSeats];
	NSLog(@"seats = %@", self.seatsArray);
}

- (IBAction)handleSegmentChange:(id)sender {
	switch (self.segmentControl.selectedSegmentIndex) {
		case 0:
			self.upperSeatCollectionView.hidden = YES;
			self.lowerSeatCollectionView.hidden = NO;
			break;
		case 1:
			self.upperSeatCollectionView.hidden = NO;
			self.lowerSeatCollectionView.hidden = YES;

 		 default:
			break;
	}
}

- (NSInteger)numberOfSegments {
	return 2;
}

- (NSInteger)seatCollectionView:(SeatCollectionView *)collectionView numberOfSectionsForSegment:(NSInteger) segment {
	switch (segment) {
		case 0:
			return 3;
			break;
			
		case 1:
			return 2;
			break;

  		default:
			return 0;
			break;
	}
}

- (SeatType)seatCollectionView:(SeatCollectionView *)collectionView seatTypeforIndexPath:(NSIndexPath *)indexPath {
	if ([self.lowerSeatCollectionView isEqual:collectionView]) {
		switch (indexPath.section) {
  			case 0:
				return SeatTypeSleeper;
			case 1:
				return SeatTypeSeater;
			case 2:
				if (indexPath.item == 0) {
					return SeatTypeSleeper;
				}else {
					return SeatTypeSeater;
				}
			case 3:
				return SeatTypeSleeper;
			case 4:
				return SeatTypeSleeper;

			default:
				return SeatTypeNone;
		}
	}else {
		return SeatTypeSleeper;
	}
}

- (NSString *)seatCollectionView:(SeatCollectionView *)collectionView seatNameforIndexPath:(NSIndexPath *)indexPath {
	return [NSString stringWithFormat:@"%lu", (long)indexPath.row];
}

- (NSInteger)maximumNumberOfItemsPerSection {
	return 5;
}

#pragma mark - UICollectionViewDatasource

- (NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView {
	return 1;
}

- (NSInteger) collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section {
	return self.priceArray.count;
}

- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {
	PriceCell *priceCell = [collectionView dequeueReusableCellWithReuseIdentifier:@"priceCell" forIndexPath:indexPath];
	priceCell.priceLabel.text = [self.priceArray objectAtIndex:indexPath.row];

	if ([[self.priceArray objectAtIndex:indexPath.row] isEqualToString:@"All"]) {
		priceCell.backgroundColor = [UIColor redColor];
	}
	else {
        priceCell.backgroundColor = [UIColor lightGrayColor];
	}
	priceCell.priceLabel.textColor = [UIColor whiteColor];
	priceCell.layer.cornerRadius = priceCell.frame.size.width/2;
	priceCell.layer.masksToBounds = YES;
	return priceCell;
}

//- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath {
//	CGSize size = CGSizeMake(40, 40);
//	return  size;
//}

- (void)collectionView: (UICollectionView *)collectionView didSelectItemAtIndexPath:(nonnull NSIndexPath *)indexPath {
	if (self.indexPathsForLowerSelectedSeats.count + self.indexPathsForUpperSelectedSeats.count == MaximumAllowedSelection) {
		return;
	}
	// If seat type is SeatStatusBooked, return
	// else select and save in indexPathsForLowerSelectedSeats/indexPathsForUpperSelectedSeats
}

- (UIEdgeInsets)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout insetForSectionAtIndex:(NSInteger)section {
	NSInteger cellCount = [collectionView.dataSource collectionView:collectionView numberOfItemsInSection:section];
	if( cellCount > 0 )
	{
		CGFloat cellWidth = ((UICollectionViewFlowLayout*)collectionViewLayout).itemSize.width+((UICollectionViewFlowLayout*)collectionViewLayout).minimumInteritemSpacing;
		CGFloat totalCellWidth = cellWidth*cellCount;
		CGFloat contentWidth = collectionView.frame.size.width-collectionView.contentInset.left-collectionView.contentInset.right;
		if( totalCellWidth<contentWidth )
		{
			CGFloat padding = (contentWidth - totalCellWidth) / 2.0;
			return UIEdgeInsetsMake(5, padding, 0, padding);
		}
	}
	return UIEdgeInsetsZero;
}

- (NSDictionary *) json_StringToDictionary:(NSString *)string {
	NSError *error;
	NSData *objectData = [string dataUsingEncoding:NSUTF8StringEncoding];
	NSDictionary *json = [NSJSONSerialization JSONObjectWithData:objectData options:NSJSONReadingMutableContainers error:&error];
	return (!json ? nil : json);
}

@end
